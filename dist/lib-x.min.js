//! web-ignition v1.7.1 ~~ https://github.com/center-key/web-ignition ~~ MIT License
const libXUi={plugin:{id:function(name){const elem=this;return name===undefined?elem.attr("id"):elem.attr({id:name})},enable:function(setOn){const elem=this;return elem.prop({disabled:setOn!==undefined&&!setOn})},disable:function(setOff){const elem=this;return elem.prop({disabled:setOff===undefined||!!setOff})},findAll:function(selector){const elem=this;return elem.find(selector).addBack(selector)},forEach:function(fn){const elems=this;return elems.each((index,node)=>fn($(node),index))}},toElem(elemOrNodeOrEventOrIndex,that){const elem=elemOrNodeOrEventOrIndex instanceof $&&elemOrNodeOrEventOrIndex;const target=elemOrNodeOrEventOrIndex&&elemOrNodeOrEventOrIndex.target;return elem||$(target||elemOrNodeOrEventOrIndex||that)},makeIcons(holder){const makeIcon=elem=>elem.addClass("fa-"+elem.data().icon);const makeBrand=elem=>elem.addClass("fa-"+elem.data().brand);holder["findAll"]("i[data-icon]").addClass("font-icon fas").forEach(makeIcon);holder["findAll"]("i[data-brand]").addClass("font-icon fab").forEach(makeBrand);return holder},normalize(holder){const elem=holder||$(document.body);libX.ui.makeIcons(elem);elem.find("button:not([type])").attr({type:"button"});elem.find("input:not([type])").attr({type:"text"});elem.find("input[type=email]").attr({autocorrect:"off",spellcheck:false});elem.find("a img, a i.font-icon").closest("a").addClass("image-link");if(!libX.browser.userAgentData().mobile)elem.find("a.external-site, .external-site a").attr({target:"_blank"});return elem},displayAddr(){const elems=$(".display-addr");const display=elem=>elem.html(elem.data().name+"<span>"+String.fromCharCode(64)+elem.data().domain+"</span>");return elems.forEach(display)},popup(url,options){const defaults={width:600,height:400};const settings=Object.assign(Object.assign({},defaults),options);const dimensions="left=200,top=100,width="+settings.width+",height="+settings.height;return globalThis.open(url,"_blank",dimensions+",scrollbars,resizable,status")},popupClick(event){const data=$(event.target).data();return libX.ui.popup(data.hrefPopup,data)},revealSection(event){const button=$(event.target).closest(".reveal-button");const findTarget=".reveal-target[data-reveal="+button.data().reveal+"]";const target=button.data().reveal?$(findTarget):button.next();dna.ui.slideFadeOut(button);return dna.ui.slideFadeIn(target)},keepOnScreen(elem,options){const defaults={padding:10};const settings=Object.assign(Object.assign({},defaults),options);const pad=settings.padding;const win={width:$(window).width(),height:$(window).height(),scroll:$(window).scrollTop()};const offset=elem.offset();const moveR=Math.max(-offset.left,-pad)+pad;const moveL=Math.max(offset.left+elem.width()-win.width,-pad)+pad;const moveU=Math.min(win.scroll+win.height-offset.top-elem.height()-pad,0);const moveD=Math.max(moveU,win.scroll-offset.top+pad);return elem.css({left:`+=${moveR-moveL}px`,top:`+=${moveD}px`})},autoDisableButtons(){const disableButton=event=>{const elem=$(event.target);if(!elem.closest("nav,.no-disable").length)elem.closest("button").disable()};const disableFormButton=event=>$(event.target).find("button:not(.no-disable)").disable();$(globalThis.document).on({submit:disableFormButton},"form").on({click:disableButton},"button:not([type=submit],[data-href],[data-href-popup])")},loadImageFadeIn(elem,url,duration){const handleImg=event=>{elem.fadeIn(duration!==null&&duration!==void 0?duration:1500);return elem[0].nodeName==="IMG"?elem.attr({src:event.target.src}):elem.css({backgroundImage:"url("+event.target.src+")"})};const img=new Image;img.onload=handleImg;img.src=url;return elem},setupVideos(){const makeVideoClickable=elem=>{var _a;const src=(_a=elem.find("iframe").attr("src"))!==null&&_a!==void 0?_a:"";const url=src.replace("//www.youtube.com/embed","//youtu.be");elem.attr("data-href",url).addClass("external-site")};$("figure.video-container-link").forEach(makeVideoClickable);return $("figure.video-container >iframe").attr({allow:"fullscreen"}).parent()},setupForkMe(){const forkMe=$("#fork-me").wrap($("<div id=fork-me-container>"));const icon=$("<i>",{"data-brand":"github","data-href":forkMe.attr("href")});return forkMe.after(icon).parent().parent().addClass("forkable")}};const libXUtil={cleanupEmail(email){email=email&&email.replace(/\s/g,"").toLowerCase();return/.+@.+[.].+/.test(email)?email:null},isObj(thing){return!!thing&&thing.constructor===Object},removeWhitespace(text){return text.replace(/\s/g,"")},details(thing){const obj=thing;const elem=thing;let msg=typeof thing+" --\x3e ";const addProp=property=>{msg+=property+":"+obj[property]+" "};const jQueryDetials=elem=>elem.length===0?"":" [#1"+" elem:"+elem.first()[0].nodeName+" id:"+elem.first().id()+" class:"+elem.first().attr("class")+" kids:"+elem.first().children().length+"]";if(thing instanceof $)msg+="jquery:"+elem.jquery+" elems:"+elem.length+jQueryDetials(elem);else if(thing===null)msg+="[null]";else if(typeof thing==="object")Object.keys(obj).forEach(addProp);else msg+=thing;return msg},debug(thing){console.log(Date.now()+": "+libX.util.details(thing))}};const libXCrypto={hash(message,options){const defaults={algorithm:"SHA-256",salt:""};const settings=Object.assign(Object.assign({},defaults),options);const byteArray=(new TextEncoder).encode(message+settings.salt);const toHex=byte=>byte.toString(16).padStart(2,"0").slice(-2);const handleDigest=digest=>Array.from(new Uint8Array(digest)).map(toHex).join("");return crypto.subtle.digest("SHA-256",byteArray).then(handleDigest)}};const libXStorage={dbSave(key,obj){localStorage[key]=JSON.stringify(obj);return libX.storage.dbRead(key)},dbRead(key){return globalThis.localStorage[key]===undefined?{}:JSON.parse(globalThis.localStorage[key])},sessionSave(key,obj){globalThis.sessionStorage[key]=JSON.stringify(obj);return libX.storage.sessionRead(key)},sessionRead(key){return globalThis.sessionStorage[key]===undefined?{}:JSON.parse(globalThis.sessionStorage[key])}};const libXCounter={key:"counters",list(){const counters=sessionStorage[libX.counter.key];return counters?JSON.parse(counters):{}},get(name="default"){const counters=libX.counter.list();return counters[name]||0},set(count=0,name="default"){const counters=libX.counter.list();counters[name]=count;sessionStorage[libX.counter.key]=JSON.stringify(counters);return count},reset(name="default"){return libX.counter.set(0,name)},increment(name="default"){return libX.counter.set(libX.counter.get(name)+1,name)}};const libXBrowser={userAgentData(){var _a;const polyfill=()=>{var _a,_b,_c,_d,_e;const brandEntry=(_b=(_a=globalThis.navigator.userAgent.split(" ").pop())===null||_a===void 0?void 0:_a.split("/"))!==null&&_b!==void 0?_b:[];const hasTouch=!!navigator.maxTouchPoints;const platform=globalThis.navigator.platform;const mac=hasTouch?"iOS":"macOS";const platforms={MacIntel:mac,Win32:"Windows",iPhone:"iOS",iPad:"iOS"};return{brands:[{brand:(_c=brandEntry===null||brandEntry===void 0?void 0:brandEntry[0])!==null&&_c!==void 0?_c:"",version:(_d=brandEntry===null||brandEntry===void 0?void 0:brandEntry[1])!==null&&_d!==void 0?_d:""}],mobile:hasTouch||/Android|iPhone|iPad|Mobi/i.test(globalThis.navigator.userAgent),platform:(_e=platforms[platform])!==null&&_e!==void 0?_e:platform}};return(_a=globalThis.navigator["userAgentData"])!==null&&_a!==void 0?_a:polyfill()},iOS(){return libX.browser.userAgentData().platform==="iOS"},macOS(){return libX.browser.userAgentData().platform==="macOS"},msWindows(){return libX.browser.userAgentData().platform==="Windows"}};const libXPopupImage={show(event){const defaultPopupWidth=1e3;const thumbnail=$(event.target).addClass("popup-image");thumbnail.parent().css({position:"relative"});thumbnail.next(".popup-image-layer").remove();const keyUpEventName="keyup."+String(Date.now());const close=()=>{$(globalThis.document).off(keyUpEventName);thumbnail.next().fadeOut()};const escKeyClose=event=>event.key==="Escape"&&close();const width=thumbnail.data().popupWidth||defaultPopupWidth;const maxWidth=Math.min(width,$(window).width()-30)+"px";const imageSrc=thumbnail.data().popupImage||thumbnail.attr("src");const popup=$("<div>").addClass("popup-image-layer").on({click:close}).append(libX.ui.makeIcons($("<i data-icon=times>"))).append($("<img>").attr({src:imageSrc}).css({maxWidth:maxWidth}));popup.insertAfter(thumbnail);libX.ui.keepOnScreen(popup,{padding:30}).fadeTo("slow",1);$(document).on({[keyUpEventName]:escKeyClose})}};const libXAnimate={jiggleIt(elemOrEvent){const node=libX.ui.toElem(elemOrEvent)[0];node.style.animation="none";globalThis.requestAnimationFrame(()=>node.style.animation="jiggle-it 0.2s 3");return $(node)},rollIn(holderOrElems){let elems=holderOrElems.length===1?holderOrElems.children():holderOrElems;const startDelay=300;const fadeDelay=1500;const fadeIn={opacity:1,transition:"opacity 5s"};const roll=()=>{elems.first().css(fadeIn).delay(fadeDelay).queue(roll);elems=elems.slice(1)};elems.css({opacity:0});return globalThis.setTimeout(roll,startDelay)},montageLoop(optionsOrContainer){var _a;const options=optionsOrContainer instanceof $?{container:optionsOrContainer}:optionsOrContainer;const defaults={container:".montage-loop",start:null,intervalMs:1e4,fadeMs:3e3};const settings=Object.assign(Object.assign({},defaults),options);const container=typeof settings.container==="string"?$(settings.container):settings.container;const imgs=container.first().addClass("montage-loop").children("img");if(!imgs.length)console.error("[montage-loop] No images found:",settings.container);imgs.css({transition:`all ${settings.fadeMs}ms`});imgs.eq((_a=settings.start)!==null&&_a!==void 0?_a:Date.now()%imgs.length).addClass("current");const nextImage=()=>{const previous=imgs.removeClass("previous").filter(".current").addClass("previous");const index=(previous.index()+1)%imgs.length;imgs.removeClass("current").eq(index).addClass("current")};globalThis.setInterval(nextImage,settings.intervalMs);return imgs}};const libXBubbleHelp={setup(holder){const uninitialized=".bubble-help:not(.bubble-initialized)";const elems=(holder||$(globalThis.document)).find(uninitialized).addBack(uninitialized);const wrapperHtml="<span class=bubble-wrap></span>";const pointerHtml="<span class=bubble-pointer>&#9660;</span>";const getHover=event=>$(event.target).closest(".bubble-help-hover");const hi=event=>{const help=getHover(event).find(".bubble-help");const wrapIt=()=>help.wrap(wrapperHtml).parent().append(pointerHtml);const wrapper=help.parent().hasClass("bubble-wrap")?help.parent():wrapIt();wrapper.find(".bubble-help").show();wrapper.css({top:-wrapper.height()}).stop(true).hide().fadeIn()};const bye=event=>getHover(event).find(".bubble-wrap").fadeOut("slow");const hoverEvents={mouseenter:hi,mouseleave:bye,touchstart:hi,touchend:bye};elems.parent().addClass("bubble-help-hover").on(hoverEvents);return elems.addClass("bubble-initialized")}};const libXForm={perfect(){const form=$("form.perfect:not([action])");const version=form.data()&&form.data().version||"";const extra=version+String.fromCharCode(46,112)+"hp";const attributes={method:"post",action:"perfect"+extra};const backupField=()=>$("<input type=hidden name=version>")[0];const field=()=>form.find("[name=version]")[0]||backupField();const configure=()=>form.attr(attributes).append($(field()).val(version));return form.find("textarea").on({focus:()=>globalThis.setTimeout(configure,5e3)})}};const libXSocial={buttons:[{title:"Twitter",icon:"twitter",x:580,y:350,link:"https://twitter.com/share?text=${title}&url=${url}"},{title:"Facebook",icon:"facebook-f",x:580,y:350,link:"https://www.facebook.com/sharer.php?u=${url}"},{title:"LinkedIn",icon:"linkedin-in",x:580,y:350,link:"https://www.linkedin.com/shareArticle?mini=true&url=${url}&title=${title}"},{title:"Digg",icon:"digg",x:985,y:700,link:"https://digg.com/submit?url=${url}"},{title:"Reddit",icon:"reddit",x:600,y:750,link:"https://www.reddit.com/submit?url=${url}&title=${title}"}],share(elem){const button=libX.social.buttons[elem.index()];const insert=(text,find,value)=>text.replace(find,encodeURIComponent(value));const linkTemp=insert(button.link,"${url}",globalThis.location.href);const link=insert(linkTemp,"${title}",globalThis.document.title);return libX.ui.popup(link,{width:button.x,height:button.y})},setup(){const container=$("#social-buttons");const iconHtml=["<i data-brand="," data-click=libX.social.share></i>"];let html="<span>";const addHtml=button=>html+=iconHtml[0]+button.icon+iconHtml[1];if(container.length)libX.social.buttons.forEach(addHtml);return container.fadeTo(0,0).html(html+"</span>").fadeTo("slow",1)}};const libXExtra={blogger(websiteUrl){console.log("Setup for:",websiteUrl);const onArticleLoad=()=>{console.log("Article: %c"+$("h1.entry-title").text().trim(),"color: purple;");$("#header >.header-bar h3").attr("data-href",websiteUrl);libX.ui.normalize();globalThis["hljsEnhance"].setup()};globalThis.setTimeout(libX.ui.normalize,2e3);return $(globalThis["blogger"].ui()).on({viewitem:onArticleLoad})},gTags(scriptTag){const trackingID=$(scriptTag).attr("src").split("=")[1];globalThis["dataLayer"]=globalThis["dataLayer"]||[];function gtag(...args){globalThis["dataLayer"].push(args)}gtag("js",new Date);gtag("config",trackingID)}};const libX={version:"1.7.1",ui:libXUi,util:libXUtil,crypto:libXCrypto,storage:libXStorage,counter:libXCounter,browser:libXBrowser,popupImage:libXPopupImage,animate:libXAnimate,bubbleHelp:libXBubbleHelp,form:libXForm,social:libXSocial,extra:libXExtra,initialize(){globalThis["libX"+""]=libX;$.fn.id=libX.ui.plugin.id;$.fn.enable=libX.ui.plugin.enable;$.fn.disable=libX.ui.plugin.disable;$.fn.findAll=libX.ui.plugin.findAll;$.fn.forEach=libX.ui.plugin.forEach;libX.social.setup();libX.ui.setupForkMe();dna.registerInitializer(libX.ui.normalize);const clickAndTap=callback=>({click:callback,touchstart:callback});const onLoadSetup=()=>{libX.ui.displayAddr();libX.ui.setupVideos();libX.form.perfect();libX.bubbleHelp.setup();$(globalThis.document).on(clickAndTap(libX.ui.revealSection),".reveal-button").on({click:libX.ui.popupClick},"[data-href-popup]").on({click:libX.popupImage.show},"[data-popup-image], .popup-image")};$(onLoadSetup)}};libX.initialize();globalThis.libX=libX;
